# Changelog

All notable changes to this project will be documented in this file.

## bootmgr-rs-cli - [0.1.2] - 2025-08-17

### Changed

- No longer panics on error, but instead exits with a message.

## bootmgr-rs-cli - [0.1.1] - 2025-08-17

### Changed

- Removed dependency on `anyhow` in favor of using `BootResult`.

## bootmgr-rs-cli - [0.1.0] - 2025-08-17

### Added

- A new CLI frontend for `bootmgr-rs-core` that is mainly accessible through the UEFI shell.

## bootmgr-rs-core - [0.15.4] - 2025-08-16

### Changed

- UKI parser now tags each boot entry with its architecture, allowing for architecture filtering if needed.

## bootmgr-rs-core - [0.15.3] - 2025-08-16

### Changed

- Added more specific error messages for UEFI variable get errors.

### Fixed

- Fixed errors not having context when displayed.

## bootmgr-rs-slint - [0.9.4] - 2025-08-16

### Changed

- Used a more reasonable default for out-of-range colors.
- Set the color of the cursor to the specified foreground color, instead of white.

## bootmgr-rs-core - [0.15.2] - 2025-08-16

### Changed

- Allocate UEFI variable storage on the stack instead of the heap.

## bootmgr-rs-core - [0.15.1] - 2025-08-16

### Fixed

- Fixed partition matching for macOS systems.

## bootmgr-rs-core - [0.15.0] - 2025-08-15

### Added

- `windows_auto` parser, which is a lighter parser that does not depend on `nt_hive`.

### Changed

- Moved `windows` parser into `windows_bcd`, and made it optional in case the binary was fine with licensing as GPLv2.

## bootmgr-rs-slint - [0.9.3] - 2025-08-15

### Changed

- Relicensed as GPLv3 or later. Slint markup files are licensed as MIT.
- Added an `SPDX-License-Identifer` at the header of every source file.
- Reorganized `App` methods into different files.

## bootmgr-rs-ratatui - [0.5.2] - 2025-08-15

### Changed

- Licensed as MIT.
- Added an `SPDX-License-Identifer` at the header of every source file.

## bootmgr-rs-minimal - [0.2.1] - 2025-08-15

### Changed

- Licensed as MIT.
- Added an `SPDX-License-Identifer` at the header of every source file.

## bootmgr-rs-core - [0.14.3] - 2025-08-15

### Changed

- Relicensed under MIT, with GPLv2 only if the `windows` feature is enabled.
- Added an `SPDX-License-Identifer` at the header of every source file.

## bootmgr-rs-slint - [0.9.2] - 2025-08-15

### Changed

- Move UI related methods of `App` into separate `ui.rs` file, and move previous contents of `ui.rs` to `ui/slint_backend.rs`.

### Fixed

- Fixed an issue where the timeout was one second behind what it should be.

## bootmgr-rs-ratatui - [0.5.1] - 2025-08-15

### Fixed

- Fixed an issue where the timeout was one second behind what it should be.

## bootmgr-rs-core - [0.14.2] - 2025-08-14

### Fixed

- Resolved issue with UEFI variables not being accessible.

## bootmgr-rs-core - [0.14.1] - 2025-08-14

### Added

- Added a `bool` implementation for `UefiVariable`.

## bootmgr-rs-ratatui - [0.5.0] - 2025-08-14

### Removed

- Removed `with_output` method for `UefiBackend`.

## bootmgr-rs-slint - [0.9.1] - 2025-08-14

### Added

- Added a background window for the editor.

### Changed

- Formatted Slint UI files.

## bootmgr-rs-core - [0.14.0] - 2025-08-14

### Changed

- Project is now licensed under GPL 2.0 or later.

## bootmgr-rs-slint - [0.9.0] - 2025-08-14

### Changed

- Significantly refactor internal architecture to be more callback-based.
- Remove `AppState` enum and make it so that the Slint UI manages state by itself.

## bootmgr-rs-core - [0.13.2] - 2025-08-13

### Changed

- Changed setting load options to become a no-op when the size of the options is too large, and use CHUNK_SIZE constant for size of buffer in `UefiFileSystem::rename`.

## bootmgr-rs-core - [0.13.1] - 2025-08-13

### Changed

- Removed redundant `installed` field from `SecurityOverrideGuard`.

## bootmgr-rs-core - [0.13.0] - 2025-08-13

### Added

- `PersistentConfig` which allows to save configurations to the filesystem.

## bootmgr-rs-slint - [0.8.0] - 2025-08-13

### Added

- Now has support for persistent `Config` editing, similar to bootmgr-rs-ratatui.

## bootmgr-rs-slint - [0.7.3] - 2025-08-13

### Changed

- Uses heapless for message passing instead of sharing state of `BootMgr` and `Editor` through `Rc<RefCell<T>>`.
- Uses heapless Vec instead of SmallVec for storing events.

## bootmgr-rs-core - [0.12.1] - 2025-08-13

### Changed

- Now asks Shim to retain its protocol for subsequent boots.

## bootmgr-rs-slint - [0.7.2] - 2025-08-13

### Changed

- Refactored some repeated logic for refreshing boot items into `refresh_boot_items`.
- Refresh boot items after a failure in loading a boot option.

## bootmgr-rs-slint - [0.7.1] - 2025-08-13

### Changed

- `slint_inc.rs` file added to isolate autogenerated Slint UI code from other code.

## bootmgr-rs-core - [0.12.0] - 2025-08-12

### Changed

- `BootAction::run` is now private to the crate (use `load_boot_option` or `BootMgr::load` instead). (BREAKING)
- `get_str_fields` now returns an iterator of `(&'static str, Option<&str>)`. (BREAKING)

## bootmgr-rs-slint - [0.7.0] - 2025-08-12

### Added

- Added a mouse-driven configuration editor with options for exiting and applying changes.

### Changed

- `SmallVec` used instead of `Vec` for storing `Event`s.

## bootmgr-rs-core - [0.11.6] - 2025-08-12

### Changed

- `Config::is_good` now takes an `&self` instead of an `&mut self`.
- `UefiFileSystem::rename` now operates on a stack buffer of 4 KiB.

## bootmgr-rs-core - [0.11.5] - 2025-08-12

### Changed

- Now uses the safer `tinyvec` instead of `smallvec`.

## bootmgr-rs-core - [0.11.4] - 2025-08-12

### Changed

- Tightened clippy lints.
- Internal code cleanup and improvements.

## bootmgr-rs-core - [0.11.3] - 2025-08-11

### Changed

- Specified MSRV in Cargo.toml file.
- `UefiFileSystem::rename` is now buffered.

## bootmgr-rs-slint - [0.6.0] - 2025-08-11

### Added

- Added non-fatal error popup for load errors.

### Changed

- Removed redundant safety comment.

## bootmgr-rs-core - [0.11.2] - 2025-08-11

### Changed

- An individual driver failing to load is no longer a fatal error.

## bootmgr-rs-core - [0.11.1] - 2025-08-11

### Added

- Added a new `create_timer` function for reducing boilerplate of timeout creation.

### Changed

- Devicetree struct now contains `&'a [u8]` rather than `&'static [u8]`.
- Devicetree logic is now slightly safer (1 unsafe usage removed).

## bootmgr-rs-ratatui - [0.4.1] - 2025-08-11

### Changed

- Now uses `create_timer` function for timeout handling.

## bootmgr-rs-slint - [0.5.1] - 2025-08-11

### Changed

- `TransparentWrapper` from bytemuck is now used to safely convert between `SlintBltPixel` and `BltPixel`.
- Now uses `create_timer` function for timeout handling.

## bootmgr-rs-core - [0.11.0] - 2025-08-11

### Changed

- Tighten visibility on two previously public members `scan_configs` and `is_target_partition`. (BREAKING)

### Fixed

- Resolved proptest regression for BLS parser.

## bootmgr-rs-core - [0.10.0] - 2025-08-11

### Changed

- Tighten visibility on multiple members. (BREAKING)

## bootmgr-rs-ratatui - [0.4.0] - 2025-08-11

### Changed

- Const-ified `Theme::new`.
- Internal code improvements.

### Removed

- Removed redundant `App::close` method.

## bootmgr-rs-slint - [0.5.0] - 2025-08-11

### Changed

- Const-ified a few functions that were eligible.
- Cursor is no longer directly drawn to framebuffer, but now directly uses GOP BLT.
- Internal code improvements and optimizations.

## bootmgr-rs-core - [0.9.0] - 2025-08-11

### Changed

- Const-ified many functions that were eligible.
- Internal code improvements.
- Clarify current MSRV in crate-level documentation.

## bootmgr-rs-core - [0.8.0] - 2025-08-10

### Added

- `locate_protocol` helper for getting a protocol.

### Changed

- Mark "bad" entries when getting preferred title.

## bootmgr-rs-core - [0.7.0] - 2025-08-10

### Changed

- Uses of `usize::MAX` replaced with safer `ONE_GIGABYTE` constant.
- Improved documentation.

### Removed

- `SecureBootError::AlreadyInstalled` error variant removed.

## bootmgr-rs-slint - [0.4.0] - 2025-08-10

### Added

- Added proper-er error handling (errors are now displayed as a popup).

### Changed

- `App::run()` now consumes `self` rather than a mutable reference to `self`.

## bootmgr-rs-slint - [0.3.0] - 2025-08-10

### Changed

- Improved documentation.
- Slint `listIdx` is now set exclusively by Rust.

## bootmgr-rs-ratatui - [0.3.0] - 2025-08-10

### Added

- New indicator for bad boot entries.

## bootmgr-rs-core - [0.6.0] - 2025-08-10

### Added

- More error variants added to `FsError`.

### Changed

- Improved documentation.
- `BootConfig` file errors are now propagated, unless the error was file not found.
- `UefiFileSystem` methods now return `Result<T, FsError>`. (BREAKING)

## bootmgr-rs-core - [0.5.0] - 2025-08-10

### Added

- Consolidated filesystem helpers into `UefiFileSystem` struct.

### Changed

- Improved documentation.
- Internal helper `slice_to_maybe_uninit` is now generic.

### Removed

- Removed almost every standalone filesystem helper. (BREAKING)

## bootmgr-rs-slint - [0.2.1] - 2025-08-09

### Changed

- Slightly improved program flow.
- Sleep when there are no active animations to save cycles.

## bootmgr-rs-minimal - [0.2.0] - 2025-08-08

### Changed

- Use boxed errors instead of anyhow, to remove a dependency.
- Remove unnecessary documentation.

## bootmgr-rs-ratatui - [0.2.0] - 2025-08-08

### Added

- Persistent configuration overlay.
- Allow removing persistent configurations.
- Use `ConfigEditor` instead of own editor implementation.

### Changed

- Editor state is now tracked with an enum instead of bools.

## bootmgr-rs-slint - [0.2.0] - 2025-08-07

### Added

- Added cursor/mouse support.

### Changed

- Greatly improved structuring and main loop.
- Adjust animation timings.

## bootmgr-rs-core - [0.4.0] - 2025-08-07

### Added

- `ConfigEditor` which exposes an available set of fields to the frontend, which can be edited and rebuilt into a `Config`.

### Changed

- Improved documentation.

### Fixed

- Bug with `boot/loader/efi.rs` where load options would be set for all images (even if empty).

## bootmgr-rs-core - [0.3.0] - 2025-08-06

### Added

- Added `get_preferred_title` method to `Config`, which is now the preferred way of getting a title.
- `HACKING.md` guide for an overview of the project.

### Changed

- Use Shim to load drivers instead of the default UEFI LoadImage.
- Privatize `install_security_override` and `uninstall_security_override`.

## bootmgr-rs-slint - [0.1.0] - 2025-08-06

### Added

- Slint UI frontend, a carousel graphical frontend to `bootmgr-rs-core`.
- Images of this frontend.

## bootmgr-rs-core - [0.2.0] - 2025-08-05

### Added

- Property testing for some unit tests.

### Changed

- Privatize many once public members of `bootmgr-rs-core` API. (BREAKING)
- Tighter lints for clippy and cargo.
- Update naming of some fields.

## bootmgr-rs-minimal - [0.1.0] - 2025-08-02

### Changed

- `bootmgr-rs-basic` renamed to `bootmgr-rs-minimal`.

## bootmgr-rs-ratatui - [0.1.0] - 2025-08-01

### Changed

- `bootmgr-rs` renamed to `bootmgr-rs-ratatui`.

## [0.5.0] - 2025-08-01

### Added

- `bootmgr-rs-basic` crate, which is a skeleton frontend for `bootmgr-rs-core`.
- `bootmgr-rs-core` crate, which is the UEFI logic separated from `bootmgr-rs`.
- `bootmgr-rs` crate, which is the ratatui frontend for `bootmgr-rs-core`.

### Changed

- Formatting.
- Improved documentation.

## [0.4.1] - 2025-08-01

### Changed

- Formatting.
- General code structure improvements.
- Use anyhow instead of `BootResult` in tests.
- Improved documentation.

### Fixed

- Bug with fuzzing that prevented it from working on release profile with lto enabled.

## [0.4.0] - 2025-08-01

### Added

- New `SecurityOverrideGuard` struct that automatically manages security override installation and uninstallation.
- Separate `secure_boot.rs` into `security_hooks.rs`.

### Changed

- Formatting.
- `reset_to_firmware` now returns `!` instead of `BootResult<!>`.
- Improved documentation.

## [0.3.3] - 2025-07-31

### Added

- `read_into` function which reads into a byte buffer instead of returning an allocated `Vec`.

### Changed

- Use `read_into` function in more places.

### Fixed

- Fixed an issue with xtasks where the release flag was not applying.

## [0.3.2] - 2025-07-31

### Changed

- Store a static slice inside of the Devicetree struct, and initialize it once on `Devicetree::new`.
- `DevicetreeFixup::fixup` is now safe due to no longer taking raw pointers as parameters.

## [0.3.1] - 2025-07-31

### Changed

- Improved documentation.
- Use safer `RefCell` instead of `UnsafeCell` for LoadOptions.
- Use `Cell` instead of `OnceCell` for security override.
- Removed even more usages of `unwrap`.

## [0.3.0] - 2025-07-31

### Added

- `xtask` build system.
- Use cargo workspace instead of one crate.
- Architecture validation for devicetree installation.
- SmallVec usage in some places instead of Vec.
- New internal helper `slice_to_maybe_uninit`.

### Changed

- Fuzzers now fuzz with raw bytes on `BootConfig` and BLS parsers.
- Crackdown on `unwrap` usage.

### Removed

- `read_to_string` function (use `str::from_utf8(read())) instead`).

## [0.2.1] - 2025-07-29

### Changed

- Improved documentation.
- Use `BootResult<T>` more extensively.
- Improved testing.

## [0.2.0] - 2025-07-28

### Added

- `bootmgr-rs-test` (integration testing suite).
- `BootConfig` fuzzer.
- Simple EFI over TFTP/PXE booting support.
- Security override installation and Shim support.
- Newtypes for validated `Config` fields.
- `shutdown` and `reset` functions.

### Changed

- Consolidated `Result<T, BootError>` into `BootResult<T>`.
- Changed boolean-based state into enum-based state in `App`.
- Improve documentation.
- Move `BootConfig` file to `\loader\bootmgr-rs.conf`.
- Use `DevicetreeGuard` for internally handling devicetree state.
- Add type-based validation for some fields of `Config`.
- General restructuring.

## [0.1.0] - 2025-07-18

### Added

- Complete `bootmgr-rs` codebase with ratatui frontend.
